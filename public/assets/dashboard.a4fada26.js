"use strict";(self.webpackChunkpterodactyl_panel=self.webpackChunkpterodactyl_panel||[]).push([[945],{9871:(e,t,a)=>{a.r(t),a.d(t,{default:()=>re});var n=a(7810),r=a(7275),i=a(9760),o=a(4859),l=a(2654),s=a(4457),c=a(7648),m=a(4134);var d=a(5872),p=a(7624),y=a(2259),u=a(2169),g=a.n(u);const w=(e,t)=>t>0&&e/(1024*t*1024)>=.9,h=(0,n.memo)((0,o.Ay)(s.g).withConfig({displayName:"ServerRow__Icon",componentId:"sc-1ibsw91-0"})(["",";"],e=>e.$alarm?{"--tw-text-opacity":"1",color:"rgba(248, 113, 113, var(--tw-text-opacity))"}:{"--tw-text-opacity":"1",color:"hsla(211, 12%, 43%, var(--tw-text-opacity))"}),g()),v=o.Ay.p.withConfig({displayName:"ServerRow__IconDescription",componentId:"sc-1ibsw91-1"})(["",";",";"],{fontSize:"0.875rem",lineHeight:"1.25rem",marginLeft:"0.5rem"},e=>e.$alarm?{"--tw-text-opacity":"1",color:"rgba(255, 255, 255, var(--tw-text-opacity))"}:{"--tw-text-opacity":"1",color:"hsla(211, 10%, 53%, var(--tw-text-opacity))"}),f=(0,o.Ay)(p.A).withConfig({displayName:"ServerRow__StatusIndicatorBox",componentId:"sc-1ibsw91-2"})(["",";& .status-bar{",";height:calc(100% - 0.5rem);",";}&:hover .status-bar{",";}"],{display:"grid",gridTemplateColumns:"repeat(12, minmax(0, 1fr))",gap:"1rem",position:"relative"},{width:"0.5rem","--tw-bg-opacity":"1",backgroundColor:"rgba(239, 68, 68, var(--tw-bg-opacity))",position:"absolute",right:"0px",zIndex:"20",borderRadius:"9999px",margin:"0.25rem",opacity:"0.5",transitionProperty:"all",transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"150ms"},e=>{let{$status:t}=e;return t&&"offline"!==t?"running"===t?{"--tw-bg-opacity":"1",backgroundColor:"rgba(16, 185, 129, var(--tw-bg-opacity))"}:{"--tw-bg-opacity":"1",backgroundColor:"rgba(245, 158, 11, var(--tw-bg-opacity))"}:{"--tw-bg-opacity":"1",backgroundColor:"rgba(239, 68, 68, var(--tw-bg-opacity))"}},{opacity:"0.75"});var _=(0,o.Ay)("div").withConfig({displayName:"ServerRow___StyledDiv",componentId:"sc-1ibsw91-3"})({gridColumn:"span 12 / span 12",display:"flex",alignItems:"center","@media (min-width: 640px)":{gridColumn:"span 5 / span 5"},"@media (min-width: 1024px)":{gridColumn:"span 6 / span 6"}}),b=(0,o.Ay)("p").withConfig({displayName:"ServerRow___StyledP",componentId:"sc-1ibsw91-4"})({fontSize:"1.125rem",lineHeight:"1.75rem",overflowWrap:"break-word"}),S=(0,o.Ay)("p").withConfig({displayName:"ServerRow___StyledP2",componentId:"sc-1ibsw91-5"})({fontSize:"0.875rem",lineHeight:"1.25rem","--tw-text-opacity":"1",color:"hsla(211, 13%, 65%, var(--tw-text-opacity))",overflowWrap:"break-word",overflow:"hidden",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"2"}),x=(0,o.Ay)("div").withConfig({displayName:"ServerRow___StyledDiv2",componentId:"sc-1ibsw91-6"})({flex:"1 1 0%",marginLeft:"1rem",display:"none","@media (min-width: 1024px)":{gridColumn:"span 2 / span 2",display:"block"}}),E=(0,o.Ay)("div").withConfig({displayName:"ServerRow___StyledDiv3",componentId:"sc-1ibsw91-7"})({display:"flex",justifyContent:"center"}),A=(0,o.Ay)(s.g).withConfig({displayName:"ServerRow___StyledFontAwesomeIcon",componentId:"sc-1ibsw91-8"})({"--tw-text-opacity":"1",color:"hsla(211, 12%, 43%, var(--tw-text-opacity))"}),C=(0,o.Ay)("p").withConfig({displayName:"ServerRow___StyledP3",componentId:"sc-1ibsw91-9"})({fontSize:"0.875rem",lineHeight:"1.25rem","--tw-text-opacity":"1",color:"hsla(211, 10%, 53%, var(--tw-text-opacity))",marginLeft:"0.5rem"}),k=(0,o.Ay)("div").withConfig({displayName:"ServerRow___StyledDiv4",componentId:"sc-1ibsw91-10"})({gridColumn:"span 7 / span 7",display:"none",alignItems:"baseline",justifyContent:"center","@media (min-width: 640px)":{display:"flex"},"@media (min-width: 1024px)":{gridColumn:"span 4 / span 4"}}),I=(0,o.Ay)("div").withConfig({displayName:"ServerRow___StyledDiv5",componentId:"sc-1ibsw91-11"})({flex:"1 1 0%",textAlign:"center"}),N=(0,o.Ay)("span").withConfig({displayName:"ServerRow___StyledSpan",componentId:"sc-1ibsw91-12"})({"--tw-bg-opacity":"1",backgroundColor:"rgba(239, 68, 68, var(--tw-bg-opacity))",borderRadius:"0.25rem",paddingLeft:"0.5rem",paddingRight:"0.5rem",paddingTop:"0.25rem",paddingBottom:"0.25rem","--tw-text-opacity":"1",color:"rgba(254, 226, 226, var(--tw-text-opacity))",fontSize:"0.75rem",lineHeight:"1rem"}),R=(0,o.Ay)("div").withConfig({displayName:"ServerRow___StyledDiv6",componentId:"sc-1ibsw91-13"})({flex:"1 1 0%",textAlign:"center"}),D=(0,o.Ay)("span").withConfig({displayName:"ServerRow___StyledSpan2",componentId:"sc-1ibsw91-14"})({"--tw-bg-opacity":"1",backgroundColor:"hsla(211, 12%, 43%, var(--tw-bg-opacity))",borderRadius:"0.25rem",paddingLeft:"0.5rem",paddingRight:"0.5rem",paddingTop:"0.25rem",paddingBottom:"0.25rem","--tw-text-opacity":"1",color:"hsla(214, 15%, 91%, var(--tw-text-opacity))",fontSize:"0.75rem",lineHeight:"1rem"}),$=(0,o.Ay)("div").withConfig({displayName:"ServerRow___StyledDiv7",componentId:"sc-1ibsw91-15"})({flex:"1 1 0%",marginLeft:"1rem",display:"none","@media (min-width: 640px)":{display:"block"}}),z=(0,o.Ay)("div").withConfig({displayName:"ServerRow___StyledDiv8",componentId:"sc-1ibsw91-16"})({display:"flex",justifyContent:"center"}),P=(0,o.Ay)("p").withConfig({displayName:"ServerRow___StyledP4",componentId:"sc-1ibsw91-17"})({fontSize:"0.75rem",lineHeight:"1rem","--tw-text-opacity":"1",color:"hsla(209, 14%, 37%, var(--tw-text-opacity))",textAlign:"center",marginTop:"0.25rem"}),T=(0,o.Ay)("div").withConfig({displayName:"ServerRow___StyledDiv9",componentId:"sc-1ibsw91-18"})({flex:"1 1 0%",marginLeft:"1rem",display:"none","@media (min-width: 640px)":{display:"block"}}),B=(0,o.Ay)("div").withConfig({displayName:"ServerRow___StyledDiv0",componentId:"sc-1ibsw91-19"})({display:"flex",justifyContent:"center"}),H=(0,o.Ay)("p").withConfig({displayName:"ServerRow___StyledP5",componentId:"sc-1ibsw91-20"})({fontSize:"0.75rem",lineHeight:"1rem","--tw-text-opacity":"1",color:"hsla(209, 14%, 37%, var(--tw-text-opacity))",textAlign:"center",marginTop:"0.25rem"}),U=(0,o.Ay)("div").withConfig({displayName:"ServerRow___StyledDiv1",componentId:"sc-1ibsw91-21"})({flex:"1 1 0%",marginLeft:"1rem",display:"none","@media (min-width: 640px)":{display:"block"}}),L=(0,o.Ay)("div").withConfig({displayName:"ServerRow___StyledDiv10",componentId:"sc-1ibsw91-22"})({display:"flex",justifyContent:"center"}),F=(0,o.Ay)("p").withConfig({displayName:"ServerRow___StyledP6",componentId:"sc-1ibsw91-23"})({fontSize:"0.75rem",lineHeight:"1rem","--tw-text-opacity":"1",color:"hsla(209, 14%, 37%, var(--tw-text-opacity))",textAlign:"center",marginTop:"0.25rem"}),j=a(3481),W=a(5161),q=a(5298),O=a(8637),K=a(3246),M=a(6642),V=a(1898);const G=()=>{const{search:e}=(0,r.zy)(),t=Number(new URLSearchParams(e).get("page")||"1"),[a,i]=(0,n.useState)(!isNaN(t)&&t>0?t:1),{clearFlashes:o,clearAndAddHttpError:s}=(0,W.A)(),c=(0,q.O$)(e=>e.user.data.uuid),m=(0,q.O$)(e=>e.user.data.rootAdmin),[d,p]=(0,O.y)(`${c}:show_all_servers`,!1),{data:u,error:g}=(0,M.Ay)(["/api/client/servers",d&&m,a],()=>(0,l.A)({page:a,type:d&&m?"admin":void 0}));return(0,n.useEffect)(()=>{u&&u.pagination.currentPage>1&&!u.items.length&&i(1)},[null==u?void 0:u.pagination.currentPage]),(0,n.useEffect)(()=>{window.history.replaceState(null,document.title,"/"+(a<=1?"":`?page=${a}`))},[a]),(0,n.useEffect)(()=>{g&&s({key:"dashboard",error:g}),g||o("dashboard")},[g]),n.createElement(j.A,{title:"Dashboard",showFlashKey:"dashboard"},m&&n.createElement(Y,null,n.createElement(J,null,d?"Showing others' servers":"Showing your servers"),n.createElement(K.A,{name:"show_all_servers",defaultChecked:d,onChange:()=>p(e=>!e)})),u?n.createElement(V.A,{data:u,onPageSelect:i},e=>{let{items:t}=e;return t.length>0?t.map((e,t)=>n.createElement(Q,{key:e.uuid,server:e,$_css:t>0?{marginTop:"0.5rem"}:void 0})):n.createElement(X,null,d?"There are no other servers to display.":"There are no servers associated with your account.")}):n.createElement(y.A,{centered:!0,size:"large"}))};var Y=(0,o.Ay)("div").withConfig({displayName:"DashboardContainer___StyledDiv",componentId:"sc-1topkxf-0"})({marginBottom:"0.5rem",display:"flex",justifyContent:"flex-end",alignItems:"center"}),J=(0,o.Ay)("p").withConfig({displayName:"DashboardContainer___StyledP",componentId:"sc-1topkxf-1"})({textTransform:"uppercase",fontSize:"0.75rem",lineHeight:"1rem","--tw-text-opacity":"1",color:"hsla(211, 10%, 53%, var(--tw-text-opacity))",marginRight:"0.5rem"}),Q=(0,o.Ay)(e=>{let{server:t,className:a}=e;const i=(0,n.useRef)(null),[o,l]=(0,n.useState)("suspended"===t.status),[p,u]=(0,n.useState)(null),g=()=>(e=>new Promise((t,a)=>{m.Ay.get(`/api/client/servers/${e}/resources`).then(e=>{let{data:{attributes:a}}=e;return t({status:a.current_state,isSuspended:a.is_suspended,memoryUsageInBytes:a.resources.memory_bytes,cpuUsagePercent:a.resources.cpu_absolute,diskUsageInBytes:a.resources.disk_bytes,networkRxInBytes:a.resources.network_rx_bytes,networkTxInBytes:a.resources.network_tx_bytes,uptime:a.resources.uptime})}).catch(a)}))(t.uuid).then(e=>u(e)).catch(e=>console.error(e));(0,n.useEffect)(()=>{l((null==p?void 0:p.isSuspended)||"suspended"===t.status)},[null==p?void 0:p.isSuspended,t.status]),(0,n.useEffect)(()=>{if(!o)return g().then(()=>{i.current=setInterval(()=>g(),3e4)}),()=>{i.current&&clearInterval(i.current)}},[o]);const j={cpu:!1,memory:!1,disk:!1};p&&(j.cpu=0!==t.limits.cpu&&p.cpuUsagePercent>=.9*t.limits.cpu,j.memory=w(p.memoryUsageInBytes,t.limits.memory),j.disk=0!==t.limits.disk&&w(p.diskUsageInBytes,t.limits.disk));const W=0!==t.limits.disk?(0,d.A)((0,d.h)(t.limits.disk)):"Unlimited",q=0!==t.limits.memory?(0,d.A)((0,d.h)(t.limits.memory)):"Unlimited",O=0!==t.limits.cpu?t.limits.cpu+" %":"Unlimited";return n.createElement(f,{as:r.N_,to:`/server/${t.id}`,className:a,$status:null==p?void 0:p.status},n.createElement(_,null,n.createElement("div",{className:"icon mr-4"},n.createElement(s.g,{icon:c.D6w})),n.createElement("div",null,n.createElement(b,null,t.name),!!t.description&&n.createElement(S,null,t.description))),n.createElement(x,null,n.createElement(E,null,n.createElement(A,{icon:c.HGT}),n.createElement(C,null,t.allocations.filter(e=>e.isDefault).map(e=>n.createElement(n.Fragment,{key:e.ip+e.port.toString()},e.alias||(0,d.ip)(e.ip),":",e.port))))),n.createElement(k,null,!p||o?o?n.createElement(I,null,n.createElement(N,null,"suspended"===t.status?"Suspended":"Connection Error")):t.isTransferring||t.status?n.createElement(R,null,n.createElement(D,null,t.isTransferring?"Transferring":"installing"===t.status?"Installing":"restoring_backup"===t.status?"Restoring Backup":"Unavailable")):n.createElement(y.A,{size:"small"}):n.createElement(n.Fragment,null,n.createElement($,null,n.createElement(z,null,n.createElement(h,{icon:c.YSV,$alarm:j.cpu}),n.createElement(v,{$alarm:j.cpu},p.cpuUsagePercent.toFixed(2)," %")),n.createElement(P,null,"of ",O)),n.createElement(T,null,n.createElement(B,null,n.createElement(h,{icon:c.HqV,$alarm:j.memory}),n.createElement(v,{$alarm:j.memory},(0,d.A)(p.memoryUsageInBytes))),n.createElement(H,null,"of ",q)),n.createElement(U,null,n.createElement(L,null,n.createElement(h,{icon:c.MBK,$alarm:j.disk}),n.createElement(v,{$alarm:j.disk},(0,d.A)(p.diskUsageInBytes))),n.createElement(F,null,"of ",W)))),n.createElement("div",{className:"status-bar"}))}).withConfig({displayName:"DashboardContainer___StyledServerRow",componentId:"sc-1topkxf-2"})(["",""],e=>e.$_css),X=(0,o.Ay)("p").withConfig({displayName:"DashboardContainer___StyledP2",componentId:"sc-1topkxf-3"})({textAlign:"center",fontSize:"0.875rem",lineHeight:"1.25rem","--tw-text-opacity":"1",color:"hsla(211, 10%, 53%, var(--tw-text-opacity))"}),Z=a(5859),ee=a(2615),te=a(2480),ae=a(5603),ne=a(1556);const re=()=>{const e=(0,ae.zy)();return n.createElement(n.Fragment,null,n.createElement(i.A,null),e.pathname.startsWith("/account")&&n.createElement(te.A,null,n.createElement("div",null,ne.A.account.filter(e=>!!e.name).map(e=>{let{path:t,name:a,exact:i=!1}=e;return n.createElement(r.k2,{key:t,to:`/account/${t}`.replace("//","/"),exact:i},a)}))),n.createElement(ee.A,null,n.createElement(n.Suspense,{fallback:n.createElement(y.A,{centered:!0})},n.createElement(r.dO,{location:e},n.createElement(r.qh,{path:"/",exact:!0},n.createElement(G,null)),ne.A.account.map(e=>{let{path:t,component:a}=e;return n.createElement(r.qh,{key:t,path:`/account/${t}`.replace("//","/"),exact:!0},n.createElement(a,null))}),n.createElement(r.qh,{path:"*"},n.createElement(Z.Mk,null))))))}}}]);