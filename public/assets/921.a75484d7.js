"use strict";(self.webpackChunkpterodactyl_panel=self.webpackChunkpterodactyl_panel||[]).push([[921],{3761:(e,t,i)=>{i.d(t,{A:()=>n});var a=i(4134);const n=async(e,t,i)=>{await a.Ay.post(`/api/client/servers/${e}/files/write`,i,{params:{file:t},headers:{"Content-Type":"text/plain"}})}},6921:(e,t,i)=>{i.r(t),i.d(t,{default:()=>z});var a=i(4859),n=i(7810),o=i(4134);var m=i(4675),r=i(3761),l=i(4299),s=i(5603),d=i(4180),c=i(8801),p=i(6015),x=i(4768),u=i(3617),h=i(8332),g=i(9748),f=i(5595),y=i(6454);const C=e=>{let{onFileNamed:t,onDismissed:i}=e,a=(0,c.A)(e,["onFileNamed","onDismissed"]);const o=g.P.useStoreState(e=>e.files.directory);return n.createElement(x.l1,{onSubmit:(e,i)=>{let{setSubmitting:a}=i;t((0,f.fj)(o,e.fileName)),a(!1)},initialValues:{fileName:""},validationSchema:(0,u.Ik)().shape({fileName:(0,u.Yj)().required().min(1)})},e=>{let{resetForm:t}=e;return n.createElement(p.A,(0,d.A)({onDismissed:()=>{t(),i()}},a),n.createElement(x.lV,null,n.createElement(h.A,{id:"fileName",name:"fileName",label:"File Name",description:"Enter the name that this file should be saved as.",autoFocus:!0}),n.createElement(b,null,n.createElement(y.Ay,null,"Create File"))))})};var b=(0,a.Ay)("div").withConfig({displayName:"FileNameModal___StyledDiv",componentId:"sc-11rjmp3-0"})({marginTop:"1.5rem",textAlign:"right"}),v=i(7418),S=i(713),w=i(3481),E=i(5859),_=i(4254);const A=[{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"Diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"Git Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history|license).md$/i},{name:"Golang",mime:"text/x-go",mode:"go",ext:["go"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"JavaScript",mime:"text/javascript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mime:"application/json",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"MariaDB",mime:"text/x-mariadb",mode:"sql"},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"PHP",mime:"text/x-php",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"Properties",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"Pug",mime:"text/x-pug",mimes:["text/x-pug","text/x-jade"],mode:"null",ext:["pug"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mime:"text/x-sh",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"Vue",mime:"script/x-vue",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mime:"application/xml",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"YAML",mime:"text/x-yaml",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]}];var k=i(5161),N=i(2268),F=i(6562),M=i(1719),j=i.n(M);i(4125),i(392),i(4468),i(9345),i(8709),i(1785),i(4939),i(9754),i(3452),i(2448),i(666),i(5259),i(3980),i(7261),i(7623),i(2569),i(3945),i(5943),i(5103),i(5397),i(5976),i(3075),i(2758),i(4535),i(8997),i(9298),i(2237),i(6385),i(6439),i(4202),i(9082),i(4869),i(6583),i(5341),i(8023),i(278),i(8070),i(8110),i(7238),i(798),i(692),i(9286),i(4570),i(3844),i(268),i(7366),i(3294),i(8712),i(7518),i(8726),i(8274),i(8050),i(6158),i(2570),i(174),i(1982),i(9138),i(4734),i(5802),i(1292),i(7298),i(8936),i(5480),i(3220),i(6938),i(1964),i(9402),i(4038),i(960),i(6778),i(9834),i(1262),i(9406);const D=a.Ay.div.withConfig({displayName:"CodemirrorEditor__EditorContainer",componentId:"sc-1dzlt6m-0"})(["min-height:16rem;height:calc(100vh - 20rem);",";> div{",";}.CodeMirror{font-size:12px;line-height:1.375rem;}.CodeMirror-linenumber{padding:1px 12px 0 12px !important;}.CodeMirror-foldmarker{color:#cbccc6;text-shadow:none;margin-left:0.25rem;margin-right:0.25rem;}"],{position:"relative"},{borderRadius:"0.25rem",height:"100%"}),L=e=>{let{style:t,initialContent:i,filename:a,mode:o,fetchContent:m,onContentSaved:r,onModeChanged:l}=e;const[s,d]=(0,n.useState)(),c=(0,n.useCallback)(e=>{if(!e)return;const t=j().fromTextArea(e,{mode:"text/plain",theme:"ayu-mirage",indentUnit:4,smartIndent:!0,tabSize:4,indentWithTabs:!1,lineWrapping:!0,lineNumbers:!0,foldGutter:!0,fixedGutter:!0,scrollbarStyle:"overlay",coverGutterNextToScrollbar:!1,readOnly:!1,showCursorWhenSelecting:!1,autofocus:!1,spellcheck:!0,autocorrect:!1,autocapitalize:!1,lint:!1,autoCloseBrackets:!0,matchBrackets:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]});d(t)},[]);return(0,n.useEffect)(()=>{var e;void 0!==a&&l((null===(e=(e=>{for(let t=0;t<A.length;t++){const i=A[t];if(i.file&&i.file.test(e))return i}const t=e.lastIndexOf("."),i=t>-1&&e.substring(t+1,e.length);if(i)for(let e=0;e<A.length;e++){const t=A[e];if(t.ext)for(let e=0;e<t.ext.length;e++)if(t.ext[e]===i)return t}})(a))||void 0===e?void 0:e.mime)||"text/plain")},[a]),(0,n.useEffect)(()=>{s&&s.setOption("mode",o)},[s,o]),(0,n.useEffect)(()=>{s&&(s.setValue(i||""),s.setHistory({done:[],undone:[]}))},[s,i]),(0,n.useEffect)(()=>{s?(s.addKeyMap({"Ctrl-S":()=>r(),"Cmd-S":()=>r()}),m(()=>Promise.resolve(s.getValue()))):m(()=>Promise.reject(new Error("no editor session has been configured")))},[s,m,r]),n.createElement(D,{style:t},n.createElement("textarea",{ref:c}))},z=()=>{const[e,t]=(0,n.useState)(""),{action:i}=(0,s.g)(),[a,d]=(0,n.useState)("edit"===i),[c,p]=(0,n.useState)(""),[x,u]=(0,n.useState)(!1),[h,y]=(0,n.useState)("text/plain"),b=(0,s.W6)(),{hash:S}=(0,s.zy)(),M=g.P.useStoreState(e=>e.server.data.id),j=g.P.useStoreState(e=>e.server.data.uuid),D=g.P.useStoreActions(e=>e.files.setDirectory),{addError:z,clearFlashes:O}=(0,k.A)();let U=null;(0,n.useEffect)(()=>{if("new"===i)return;t(""),d(!0);const e=(0,F.DS)(S);D((0,f.pD)(e)),((e,t)=>new Promise((i,a)=>{o.Ay.get(`/api/client/servers/${e}/files/contents`,{params:{file:t},transformResponse:e=>e,responseType:"text"}).then(e=>{let{data:t}=e;return i(t)}).catch(a)}))(j,e).then(p).catch(e=>{console.error(e),t((0,o.Tn)(e))}).then(()=>d(!1))},[i,j,S]);const V=e=>{U&&(d(!0),O("files:view"),U().then(t=>(0,r.A)(j,e||(0,F.DS)(S),t)).then(()=>{if(!e)return Promise.resolve();b.push(`/server/${M}/files/edit#/${(0,F.Kn)(e)}`)}).catch(e=>{console.error(e),z({message:(0,o.Tn)(e),key:"files:view"})}).then(()=>d(!1)))};return e?n.createElement(E.gP,{message:e,onBack:()=>b.goBack()}):n.createElement(w.A,null,n.createElement(I,{byKey:"files:view"}),n.createElement(N.A,null,n.createElement(P,null,n.createElement(l.A,{withinFileEditor:!0,isNewFile:"edit"!==i}))),S.replace(/^#/,"").endsWith(".pteroignore")&&n.createElement(T,null,n.createElement(B,null,"You're editing a ",n.createElement(R,null,".pteroignore")," ","file. Any files or directories listed in here will be excluded from backups. Wildcards are supported by using an asterisk (",n.createElement(q,null,"*"),"). You can negate a prior rule by prepending an exclamation point (",n.createElement($,null,"!"),").")),n.createElement(C,{visible:x,onDismissed:()=>u(!1),onFileNamed:e=>{u(!1),V(e)}}),n.createElement(W,null,n.createElement(m.A,{visible:a}),n.createElement(L,{mode:h,filename:S.replace(/^#/,""),onModeChanged:y,initialContent:c,fetchContent:e=>{U=e},onContentSaved:()=>{"edit"!==i?u(!0):V()}})),n.createElement(G,null,n.createElement(Q,null,n.createElement(_.A,{value:h,onChange:e=>y(e.currentTarget.value)},A.map(e=>n.createElement("option",{key:`${e.name}_${e.mime}`,value:e.mime},e.name)))),"edit"===i?n.createElement(v.A,{action:"file.update"},n.createElement(H,{onClick:()=>V()},"Save Content")):n.createElement(v.A,{action:"file.create"},n.createElement(K,{onClick:()=>u(!0)},"Create File"))))};var I=(0,a.Ay)(S.A).withConfig({displayName:"FileEditContainer___StyledFlashMessageRender",componentId:"sc-48rzpu-0"})({marginBottom:"1rem"}),P=(0,a.Ay)("div").withConfig({displayName:"FileEditContainer___StyledDiv",componentId:"sc-48rzpu-1"})({marginBottom:"1rem"}),T=(0,a.Ay)("div").withConfig({displayName:"FileEditContainer___StyledDiv2",componentId:"sc-48rzpu-2"})({marginBottom:"1rem",padding:"1rem",borderLeftWidth:"4px","--tw-bg-opacity":"1",backgroundColor:"hsla(210, 24%, 16%, var(--tw-bg-opacity))",borderRadius:"0.25rem","--tw-border-opacity":"1",borderColor:"rgba(34, 211, 238, var(--tw-border-opacity))"}),B=(0,a.Ay)("p").withConfig({displayName:"FileEditContainer___StyledP",componentId:"sc-48rzpu-3"})({"--tw-text-opacity":"1",color:"hsla(211, 13%, 65%, var(--tw-text-opacity))",fontSize:"0.875rem",lineHeight:"1.25rem"}),R=(0,a.Ay)("code").withConfig({displayName:"FileEditContainer___StyledCode",componentId:"sc-48rzpu-4"})({fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',"--tw-bg-opacity":"1",backgroundColor:"rgba(19, 26, 32, var(--tw-bg-opacity))",borderRadius:"0.25rem",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"0.25rem",paddingRight:"0.25rem"}),q=(0,a.Ay)("code").withConfig({displayName:"FileEditContainer___StyledCode2",componentId:"sc-48rzpu-5"})({fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',"--tw-bg-opacity":"1",backgroundColor:"rgba(19, 26, 32, var(--tw-bg-opacity))",borderRadius:"0.25rem",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"0.25rem",paddingRight:"0.25rem"}),$=(0,a.Ay)("code").withConfig({displayName:"FileEditContainer___StyledCode3",componentId:"sc-48rzpu-6"})({fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',"--tw-bg-opacity":"1",backgroundColor:"rgba(19, 26, 32, var(--tw-bg-opacity))",borderRadius:"0.25rem",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"0.25rem",paddingRight:"0.25rem"}),W=(0,a.Ay)("div").withConfig({displayName:"FileEditContainer___StyledDiv3",componentId:"sc-48rzpu-7"})({position:"relative"}),G=(0,a.Ay)("div").withConfig({displayName:"FileEditContainer___StyledDiv4",componentId:"sc-48rzpu-8"})({display:"flex",justifyContent:"flex-end",marginTop:"1rem"}),Q=(0,a.Ay)("div").withConfig({displayName:"FileEditContainer___StyledDiv5",componentId:"sc-48rzpu-9"})({flex:"1 1 0%",borderRadius:"0.25rem","--tw-bg-opacity":"1",backgroundColor:"hsla(210, 24%, 16%, var(--tw-bg-opacity))",marginRight:"1rem","@media (min-width: 640px)":{flex:"none"}}),H=(0,a.Ay)(y.Ay).withConfig({displayName:"FileEditContainer___StyledButton",componentId:"sc-48rzpu-10"})({flex:"1 1 0%","@media (min-width: 640px)":{flex:"none"}}),K=(0,a.Ay)(y.Ay).withConfig({displayName:"FileEditContainer___StyledButton2",componentId:"sc-48rzpu-11"})({flex:"1 1 0%","@media (min-width: 640px)":{flex:"none"}})}}]);